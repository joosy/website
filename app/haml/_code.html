<div class="code_block">
  <div id="gist-2843507" class="gist">
    <div class="gist-file">
      <div class="gist-data gist-syntax">
          <div class="gist-highlight"><pre><div class="line" id="LC1"><span class="nx">Joosy</span><span class="p">.</span><span class="nx">namespace</span> <span class="s">'Posts'</span><span class="p">,</span> <span class="o">-&gt;</span></div><div class="line" id="LC2">&nbsp;&nbsp;</div><div class="line" id="LC3">&nbsp;&nbsp;<span class="c1"># Page that lists posts</span></div><div class="line" id="LC4">&nbsp;&nbsp;<span class="k">class</span> <span class="nx">@IndexPage</span> <span class="k">extends</span> <span class="nx">ApplicationPage</span></div><div class="line" id="LC5">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1"># Determines which Layout to wrap this page in</span></div><div class="line" id="LC6">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx">@layout</span> <span class="nx">ApplicationLayout</span></div><div class="line" id="LC7">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1"># Determines which template to use</span></div><div class="line" id="LC8">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx">@view</span>   <span class="s">'index'</span></div><div class="line" id="LC9"><br></div><div class="line" id="LC10">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1"># Data fetching hook</span></div><div class="line" id="LC11">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx">@fetch</span> <span class="nf">(complete) -&gt;</span></div><div class="line" id="LC12">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx">Post</span><span class="p">.</span><span class="nx">find</span> <span class="s">'all'</span><span class="p">,</span> <span class="p">(</span><span class="nx">posts</span><span class="p">)</span> <span class="o">=&gt;</span></div><div class="line" id="LC13">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1"># Passes collection to the template</span></div><div class="line" id="LC14">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="vi">@data.posts = </span><span class="nx">posts</span></div><div class="line" id="LC15">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nx">complete</span><span class="p">()</span></div></pre></div>
      </div>

      <div class="gist-meta">
        <a href="https://gist.github.com/raw/2843507/87fc788b28d9f513537eca6a44587f037b14f3d5/gistfile1.coffee" style="float:right;">view raw</a>
        <a href="https://gist.github.com/2843507">This Gist</a> brought to you by <a href="http://github.com">GitHub</a>.
      </div>
    </div>
  </div>
</div>